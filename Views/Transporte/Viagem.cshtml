@model  SmartFleet.Domain.ViewModel.Transporte
@{
    ViewBag.Title = "Gerenciar Viagem";
    ViewBag.Current = " Cadastro / <a href='/Transporte/Pesquisar'>Solicitar Veículo</a> / Alterar";
}

<form id="formShom" class="form" role="form">
    <section class="panel panel-default">
        <header class="panel-heading">
            <a class="accordion-toggle" data-parente="" data-toggle="collapse" href="#divShow"><i class="i i-plus2"></i> Exibir Informações da Solicitação de Veículo</a>
        </header>
        <div id="divShow" class="panel-collapse collapse">
            <article class="panel-body">
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            @Html.LabelFor(x => x.IdeSolicitante, new { @class = "control-label" })
                            @Html.TextBoxFor(x => x.Solicitante.NomColaborador, new { @class = "form-control", @readonly="readonly" })
                        </div>
                    </div> 
                    <div class="col-md-3">
                        <div class="form-group">
                            @Html.LabelFor(x => x.Solicitante.NumMatricula, new { @class = "control-label" })
                            @Html.TextBoxFor(x => x.Solicitante.NumMatricula, new { @class = "form-control", @readonly="readonly" })
                        </div>
                    </div>                
                    <div class="col-md-3">
                        <div class="form-group has-feedback">
                            @Html.LabelFor(x => x.DthSolicitacao, new { @class = "control-label" })
                            @Html.TextBoxFor(x => x.DthSolicitacao, new { @class = "form-control", @readonly="readonly" })
                            <span class="form-control-feedback" style="cursor:pointer"><i class="fa fa-calendar"></i></span>
                        </div>
                    </div>                                         
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            @Html.LabelFor(x => x.IdeVeiculo, new { @class = "control-label" })
                            @Html.TextBoxFor(x => x.Veiculo.DscMarcaModelo, new { @class = "form-control", @readonly="readonly" })
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            @Html.LabelFor(x => x.Veiculo.NumPlaca, new { @class = "control-label" })
                            @Html.TextBoxFor(x => x.Veiculo.NumPlaca, new { @class = "form-control", @readonly="readonly" })
                        </div>
                    </div>                                 
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            @Html.LabelFor(x => x.IdeMotorista, new { @class = "control-label" })
                            @Html.TextBoxFor(x => x.Motorista.NomColaborador, new { @class = "form-control", @readonly="readonly" })
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            @Html.LabelFor(x => x.Motorista.NumMatricula, new { @class = "control-label" })
                            @Html.TextBoxFor(x => x.Motorista.NumMatricula, new { @class = "form-control", @readonly="readonly" })
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            @Html.LabelFor(x => x.Motorista.NumCelular, new { @class = "control-label" })
                            @Html.TextBoxFor(x => x.Motorista.NumCelular, new { @class = "form-control", @readonly="readonly" })
                        </div>
                    </div>                                                  
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            @Html.LabelFor(x => x.DscLocalOrigem, new { @class = "control-label" })
                            @Html.TextBoxFor(x => x.DscLocalOrigem, new { @class = "form-control", @readonly="readonly" })
                        </div>
                    </div>                                
                    <div class="col-md-6">
                        <div class="form-group">
                            @Html.LabelFor(x => x.DscLocalDestino, new { @class = "control-label" })
                            @Html.TextBoxFor(x => x.DscLocalDestino, new { @class = "form-control", @readonly="readonly" })
                        </div>
                    </div>                                
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            @Html.LabelFor(x => x.DscObservacao, new { @class = "control-label" })
                            @Html.TextAreaFor(x => x.DscObservacao, new { @class = "form-control", @rows = 4, @readonly="readonly" })
                        </div>
                    </div>                
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="table-responsive">
                            <table class="table table-striped table-bordered table-hover">
                                <thead>
                                    <tr>
                                        <th>Passageiro</th>
                                        <th>Matrícula</th>
                                        <th>Celular</th>
                                        <th>E-mail</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var item in Model.Passageiro)
                                    {
                                        <tr>
                                            <td>@item.Colaborador.NomColaborador</td>
                                            <td>@item.Colaborador.NumMatricula</td>
                                            <td>@item.Colaborador.NumCelular</td>
                                            <td>@item.Colaborador.DscEmail</td>                                    
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </article>
        </div>
    </section>
</form>    

<div class="line line-dashed b-b line-lg pull-in"></div>

<form id="formViagem" url="/Transporte/Viagem" class="form" role="form">
    <section class="panel panel-default">
        <article class="panel-body">
            @Html.HiddenFor(x => x.IdeTransporte)
            @Html.HiddenFor(x => x.IdeVeiculo)
            @Html.HiddenFor(x => x.IdeMotorista)
            @Html.HiddenFor(x => x.IdeSolicitante)
            @Html.HiddenFor(x => x.DscLocalOrigem)
            @Html.HiddenFor(x => x.DscLocalDestino)
            @Html.HiddenFor(x => x.DthSolicitacao)
            @Html.HiddenFor(x => x.DscObservacao)
            @Html.HiddenFor(x => x.DthInclusao)
            <div class="row">
                <div class="col-md-3">
                    <div class="form-group has-feedback">
                        @Html.LabelFor(x => x.DthPartida, new { @class = "control-label required" })
                        @Html.TextBoxFor(x => x.DthPartida, null, new
                        {
                            @class = "form-control form_datetime onlyNumber",
                            @placeholder = "__/__/____ __:__", 
                            @size="16"
                        })
                        <span class="form-control-feedback datepicker-click" style="cursor:pointer"><i class="fa fa-calendar"></i></span>
                        @Html.ValidationMessageFor(x => x.DthPartida)
                    </div>
                </div>    
                <div class="col-md-3">
                    <div class="form-group">
                        @Html.LabelFor(x => x.NumKMInicio, new { @class = "control-label required" })
                        @Html.TextBoxFor(x => x.NumKMInicio, new { @class = "form-control onlyNumber", @maxlength=6 })
                        @Html.ValidationMessageFor(x => x.NumKMInicio)
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group has-feedback">
                        @Html.LabelFor(x => x.DthChegada, new { @class = "control-label" })
                        @Html.TextBoxFor(x => x.DthChegada, null, new
                        {
                            @class = "form-control form_datetime onlyNumber",
                            @placeholder = "__/__/____ __:__", 
                            @size="16"
                        })
                        <span class="form-control-feedback datepicker-click" style="cursor:pointer"><i class="fa fa-calendar"></i></span>
                    </div>
                </div>  
                <div class="col-md-3">
                    <div class="form-group">
                        @Html.LabelFor(x => x.NumKMFim, new { @class = "control-label" })
                        @Html.TextBoxFor(x => x.NumKMFim, new { @class = "form-control onlyNumber", @maxlength=6 })
                    </div>
                </div>                                     
            </div>
        </article>
        <footer class="panel-footer">
            <button type="button" class="btn btn-primary" data-loading="false" onclick="transporte.salvarViagem(this)"><i class="fa fa-save"></i> Salvar</button>
            <a href=@Url.Action("Pesquisar", "Transporte") class="btn btn-default"><i class="fa fa-close"></i> Cancelar</a>
        </footer>        
    </section>
</form>  

@section customsJs {
    <script type="text/javascript">
        $(".form_datetime").datetimepicker({
            language:  "pt-BR",
            format: "dd/mm/yyyy hh:ii",
            weekStart: 1,
            todayBtn:  1,
            autoclose: 1,
            todayHighlight: 1,
            startView: 2,
            forceParse: 0,
            showMeridian: 1
        });
        $(".form_datetime").mask("99/99/9999 99:99");
        $(".form_datetime").datetimepicker("update");
    </script>
}
